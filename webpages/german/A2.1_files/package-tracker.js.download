sndefine("mimir",["utils","browser","core-sleeknote","storage-instance","constants","consent"],(function(e,t,n,a,r,i){function o(e){return function(e){for(var t,n="0123456789ABCDEF",a="",r=0;r<e.length;r++)t=e.charCodeAt(r),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,a=-271733879,r=-1732584194,i=271733878,o=0;o<e.length;o+=16){var s=n,f=a,m=r,d=i;a=v(a=v(a=v(a=v(a=g(a=g(a=g(a=g(a=l(a=l(a=l(a=l(a=c(a=c(a=c(a=c(a,r=c(r,i=c(i,n=c(n,a,r,i,e[o+0],7,-680876936),a,r,e[o+1],12,-389564586),n,a,e[o+2],17,606105819),i,n,e[o+3],22,-1044525330),r=c(r,i=c(i,n=c(n,a,r,i,e[o+4],7,-176418897),a,r,e[o+5],12,1200080426),n,a,e[o+6],17,-1473231341),i,n,e[o+7],22,-45705983),r=c(r,i=c(i,n=c(n,a,r,i,e[o+8],7,1770035416),a,r,e[o+9],12,-1958414417),n,a,e[o+10],17,-42063),i,n,e[o+11],22,-1990404162),r=c(r,i=c(i,n=c(n,a,r,i,e[o+12],7,1804603682),a,r,e[o+13],12,-40341101),n,a,e[o+14],17,-1502002290),i,n,e[o+15],22,1236535329),r=l(r,i=l(i,n=l(n,a,r,i,e[o+1],5,-165796510),a,r,e[o+6],9,-1069501632),n,a,e[o+11],14,643717713),i,n,e[o+0],20,-373897302),r=l(r,i=l(i,n=l(n,a,r,i,e[o+5],5,-701558691),a,r,e[o+10],9,38016083),n,a,e[o+15],14,-660478335),i,n,e[o+4],20,-405537848),r=l(r,i=l(i,n=l(n,a,r,i,e[o+9],5,568446438),a,r,e[o+14],9,-1019803690),n,a,e[o+3],14,-187363961),i,n,e[o+8],20,1163531501),r=l(r,i=l(i,n=l(n,a,r,i,e[o+13],5,-1444681467),a,r,e[o+2],9,-51403784),n,a,e[o+7],14,1735328473),i,n,e[o+12],20,-1926607734),r=g(r,i=g(i,n=g(n,a,r,i,e[o+5],4,-378558),a,r,e[o+8],11,-2022574463),n,a,e[o+11],16,1839030562),i,n,e[o+14],23,-35309556),r=g(r,i=g(i,n=g(n,a,r,i,e[o+1],4,-1530992060),a,r,e[o+4],11,1272893353),n,a,e[o+7],16,-155497632),i,n,e[o+10],23,-1094730640),r=g(r,i=g(i,n=g(n,a,r,i,e[o+13],4,681279174),a,r,e[o+0],11,-358537222),n,a,e[o+3],16,-722521979),i,n,e[o+6],23,76029189),r=g(r,i=g(i,n=g(n,a,r,i,e[o+9],4,-640364487),a,r,e[o+12],11,-421815835),n,a,e[o+15],16,530742520),i,n,e[o+2],23,-995338651),r=v(r,i=v(i,n=v(n,a,r,i,e[o+0],6,-198630844),a,r,e[o+7],10,1126891415),n,a,e[o+14],15,-1416354905),i,n,e[o+5],21,-57434055),r=v(r,i=v(i,n=v(n,a,r,i,e[o+12],6,1700485571),a,r,e[o+3],10,-1894986606),n,a,e[o+10],15,-1051523),i,n,e[o+1],21,-2054922799),r=v(r,i=v(i,n=v(n,a,r,i,e[o+8],6,1873313359),a,r,e[o+15],10,-30611744),n,a,e[o+6],15,-1560198380),i,n,e[o+13],21,1309151649),r=v(r,i=v(i,n=v(n,a,r,i,e[o+4],6,-145523070),a,r,e[o+11],10,-1120210379),n,a,e[o+2],15,718787259),i,n,e[o+9],21,-343485551),n=u(n,s),a=u(a,f),r=u(r,m),i=u(i,d)}return Array(n,a,r,i)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))).toLowerCase()}function s(e,t,n,a,r,i){return u(function(e,t){return e<<t|e>>>32-t}(u(u(t,e),u(a,i)),r),n)}function c(e,t,n,a,r,i,o){return s(t&n|~t&a,e,t,r,i,o)}function l(e,t,n,a,r,i,o){return s(t&a|n&~a,e,t,r,i,o)}function g(e,t,n,a,r,i,o){return s(t^n^a,e,t,r,i,o)}function v(e,t,n,a,r,i,o){return s(n^(t|~a),e,t,r,i,o)}function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}var f=this,m=f.document;function d(e){return e.toISOString().split(".")[0]+"Z"}function k(t,n){var a=function(e){var t=m.createElement("img");return t.width=1,t.height=1,t.src=e,t}(e.appendToUrl(t,n));a.onload=a.onerror=function(){a.onload=null,a.onerror=null}}let E=Object.create(null);function S(r){Object.keys(r).forEach(e=>{void 0===r[e]&&delete r[e]});let s=e.extend(r,function(){var n={};if(i("analytics")){var r=new Date,s=a.getSessionStartTime(),c=s?Math.round((r.getTime()-s.getTime())/1e3):0,l=a.getLastSessionEndTime();n.v0=o(a.getVistorId()),n.v3=d(r),s&&(n.v6=d(s)),e.empty(l)||(n.v7=d(l)),n.v20=e.empty(l)?"true":"false",n.v25=t.isLandscape()?"true":"false",n.v27=c,n.s4=f.location.href||"",n.s9=f.location.protocol||"",n.s11=f.location.pathname||"",n.s12=f.location.search||"",n.s13=f.location.hash||"",n.s2=m.title,n.c1=t.user.timezoneOffSet()||"",n.s7=t.user.language(),n.v5=t.userAgent(),n.v22=t.is.name,n.v23=t.is.version,n.v24=t.is.platform,n.v26=t.is.device}return m.referrer&&m.referrer!=f.location.href&&(n.v4=m.referrer),n.v21=a.getSessionId(),n}(),function(){var e={};return e.s1=n.CustomerId||"",e.s2=m.title,e.s3=f.location.hostname||"",e.s4=f.location.href||"",e.s9=f.location.protocol||"",e.s11=f.location.pathname||"",e.s12=f.location.search||"",e.s13=f.location.hash||"",e.c1=t.user.timezoneOffSet()||"",e.s7=t.user.language(),e.v5=t.userAgent(),e.v22=t.is.name,e.v23=t.is.version,e.v24=t.is.platform,e.v26=t.is.device,e}()),c=s.v1?s.v1:"event";E[c]||(E[c]=[]),E[c].push([s.v8,s.v9,s.v12,s.v33]),k("https://analytics.sleeknote.com/",function(t){var n="";return t&&(n=Object.keys(t).map((function(n){return e.urlencode(n)+"="+e.urlencode(t[n])})).join("&")),n}(s))}function h(){}return n.expose(E,"mimir"),h.prototype={trackPageView:function(){S({v8:r.MIMIR.EVENTS[f.performance&&1==f.performance.navigation.type?"PAGERELOAD":"PAGEVIEW"]||"pageview"})},extractFromNoteConfig:function(e){return{campaignId:e.config.campaignId,stepName:e.config.name,position:e.config.position,type:e.campaign.config.type,summaryId:e.campaign.config.summaryId,splitTestId:e.campaign.config.splitTestId,smartIndex:e.campaign.config.smartIndex}},trackNoteEvent:function(e,{eventName:t,triggerName:n,triggerValue:a,linkDestination:o,linkType:s,linkDestinationType:c,linkName:l,elementDataId:g}){if(t){let e=r.MIMIR.EVENTS[t.toUpperCase()];e&&(t=e)}if(n){let e=r.MIMIR.TRIGGERS[n.toUpperCase()];e&&(n=e)}let{campaignId:v,type:u,stepName:f,position:m,summaryId:d,splitTestId:k,smartIndex:E}=this.extractFromNoteConfig(e);if(u){let e=r.MIMIR.NOTES[u.toUpperCase()];e&&(u=e)}let h={v1:v,v8:t,v9:n,v10:a,v12:u,v34:d};i("analytics")&&(h={...h,v11:new Boolean(E).toString(),v13:m,v19:k&&!isNaN(k)?k:void 0,v28:o,v29:s,v30:c,v31:l,v32:g,v33:f}),/*!triggerMapping[triggerName] ||*/t&&u?S(h):console.warn("trackNoteEvent failed:",t,n,u)},trackGoal:function(e,t){if(e){let t=r.MIMIR.EVENTS[e.toUpperCase()];t&&(e=t)}S({v8:e,g1:t,v15:"true",g2:Object.keys(a.getGoalEngageList()).join(","),g3:Object.keys(a.getGoalShownList()).join(",")}),a.resetGoal()}},h})),sndefine("session-tracker",["utils","storage-instance"],(function(e,t){var n=this,a=n.document;function r(){t.startSessionTime()}var i=0,o=e.throttle(6e4,(function(){v("activity")}));function s(){i&&(n.clearInterval(i),i=0,t.endSessionTime())}function c(){r(),i||(i=n.setInterval(g,6e4))}function l(e){switch(e){case"newSession":c();break;case"newSessionIf":i||(r(),i=n.setInterval(g,6e4));break;case"endSession":s();break;case"restartSession":s(),c()}t.write("timestamp",(new Date).getTime())}function g(){v("interval")}function v(e){var n=(new Date).getTime(),a=+t.read("timestamp")||n;if(Math.max(Math.floor((n-a)/1e3),0)>=1800)switch(e){case"start":case"activity":l("restartSession");break;case"interval":l("endSession")}else switch(e){case"activity":l("newSessionIf");break;case"start":t.read("timestamp")?l("newSessionIf"):l("newSession")}}return e.listener(a,"add",o)("click")("mousemove")("keypress"),e.listener(n,"add",o)("load"),i=n.setInterval(g,6e4),v("start"),!0})),sndefine("tracker",["utils","core-sleeknote","mimir","location","storage-instance","constants","logger","session-tracker","global"],(function(e,t,n,a,r,i,o,s,c){var l=this,g=l.document,v=o.log(i.CORE.LOGLEVELS.TRACKER,i.CORE.FORMATTERS.CORE);let u=i.CORE.COMMANDS,f=i.MIMIR.EVENTS,m=i.MIMIR.TRIGGERS;function d(e,n,a){if(t.CustomInitSettings.DisableGA)v("GA disabled in config",t.CustomInitSettings.DisableGA);else if(!t.CustomInitSettings.DisableGAEvents||!~t.CustomInitSettings.DisableGAEvents.indexOf(n)){var r=l.ga,i=l._gat,o=l._gaq,s=l.__gaTracker,c=0;try{if(a=a.toString(),i&&i._getTrackers?(i._getTrackers().forEach((function(t){t._trackEvent(e,n,a,void 0,1)})),c++):o&&o.push?o.push(["_trackEvent",e,n,a,void 0,1]):s&&s("send","event",e,n,a,void 0,1),r&&r.getAll){var g=[];r.getAll().forEach((function(t){var i=t.get("trackingId");~g.indexOf(i)||(g.push(i),r(t.get("name")+".send","event",e,n,a,{nonInteraction:!0}))})),c++}c||v("google blocked")}catch(e){v(e)}}}const k=new c.Set;return t.preview?{}:new class{constructor(){this.mimirTracker=new n,l.SleekNote.trackGoal=e=>{this.mimirTracker.trackGoal(f.GOAL_CONVERTED,e)},this.mimirTracker.trackPageView(),this.isGoalMatch(),g.addEventListener("sleekNote",this)}handleEvent(t){let{creator:n}=t.data;if(n==i.CORE.CREATOR.USER){let{command:n,eventTarget:a,origin:i,campaignId:o,formData:s,eventType:c}=t.data,l=e.contains(i.campaign.config.type,"promote","guide"),g=i.campaign.config.type;switch(l&&(g="blank"),n){case u.OPEN:{let e=i.config.type;"teaser"==e&&this.event(i,{eventName:f.SHOWN,triggerName:m.TEASERCLICK,eventTarget:a}),"form"==e&&this.event(i,{eventName:f.CLOSED,eventTarget:a})}break;case u.CLOSE:{let e=i.config.type,t=f.CLOSED;"teaser"==e&&(t=f.TEASER_CLOSED),t&&this.event(i,{eventName:t,eventTarget:a})}break;case u.SUBMIT:{this.sendSleeknoteEventToTrackers(g,o);let t=r.hasConvertSessionEvent(o);if(!l&&!s||l&&this.hasConvertSessionEvent(o)&&s)return void console.log("trackEventSkip");let n=f.ENGAGED;t&&i.campaign.getType("form").length>1&&(n=f.SUBSTEP_ENGAGED),this.event(i,{eventName:n,triggerName:e.contains(c,"keypress")?m.KEYPRESSSUBMIT:m.MOUSESUBMIT}),console.log("submit",n,c),this.sendAdditionalEventDataToTracker(i),r.convertSessionEvent(o)}break;case u.CLICK:let n={eventName:f.LINK_CLICKED,eventTarget:a,href:t.data.href,step:t.data.step,target:t.data.target};this.event(i,n),l&&!k.has(o)&&(n.eventName=f.ENGAGED,this.event(i,n),this.sendSleeknoteEventToTrackers(g,o),k.add(o))}}else if(n==i.CORE.CREATOR.API){let{origin:n,trigger:a,command:r}=t.data;if(e.contains(a,"none","submit")||r==u.CLOSE)return;if("queue"==a&&"teaser"==n.config.type)return;"auto"==a&&"EmbeddedNote"==n.kind&&(a=m.EMBEDDED),this.event(n,{eventName:f.SHOWN,triggerName:a})}}event(e,t){if(!e||!t)return;let{eventTarget:n,href:a,step:r,elementDataId:i}=t;switch(n&&!i&&(t.elementDataId=n.getAttribute("data-track-id")||n.getAttribute("data-id")),t.eventName){case f.SHOWN:switch(t.triggerName){case m.TIMER:t.value=e.config.wait/1e3;break;case m.SCROLL:t.value=e.config.scroll}break;case f.ENGAGED:case f.LINK_CLICKED:if(a||r){if(!n)return;let e="IMG"==n.nodeName,i=n.classList.contains("linkbutton");t={...t,linkDestination:a||r,linkDestinationType:a?"1_url":"2_sleeknotestep",linkType:e?"1_imagelink":i?"3_linkbutton":"2_textlink",linkName:n.innerText}}break;case f.TEASER_CLOSED:t.triggerName=m.TEASERCLOSE;break;case f.CLOSED:let i=n?m.CLOSEBUTTON:m.DISMISS;i==m.CLOSEBUTTON&&n.classList.contains("linkbutton")&&(i=m.LINKBUTTON),t.triggerName=i}this.mimirTracker.trackNoteEvent(e,t),t.eventName==f.SHOWN&&this.sendSleeknoteEventToTrackers("boxShown",e.config.campaignId)}cohortEvent(e,t,n){d("cohorts",e,t+" | "+n)}sendSleeknoteEventToTrackers(e,t){function n(e,t){d("Sleeknote",e,t)}switch(t=t||"unknown",v("sendSleeknoteEventToTrackers",e),e){case"boxShown":n("Sleeknote shown",t);break;case"newsletter":n("New Subscriber",t);break;case"contact":n("New Contact Request",t);break;case"blank":n("Blank Click",t);break;case"social":n("New Social Follower",t);break;default:v("sendSleeknoteEventToTrackers","unknown")}}isGoalMatch(){var e,n,i,o=a.get(t).host.split(".");if(o.length>2&&o.shift(),o=o.join("."),t.SleeknoteGoals){var s=r.read("location");if(s.a=s.a||{},s.a.l!=o)for(s.a.l=o,r.write("location",s),e=0;e<t.SleeknoteGoals.length;e++)for(i=t.SleeknoteGoals[e].urls,n=0;n<i.length;n++)if(~o.indexOf(i[n].url)){this.mimirTracker.trackGoal(f.GOAL_CONVERTED,t.SleeknoteGoals[e].goalId);break}}}sendAdditionalEventDataToTracker(n){let r={SleeknoteId:n.config.campaignId,CustomerId:n.config.customerId,SignupPage:a.get(t).href,event:"SleeknoteSubscriber",fieldData:e.parseForm(n.config.formNode,void 0,!0)};try{let n=l.top,a=n.dataLayer||n[t.CustomInitSettings.googleDataLayerObjectName];Array.isArray(a)&&a.push(e.extend(r)),r.fieldData&&delete r.fieldData,delete r.SignupPage;var i=n.fbq||n[t.CustomInitSettings.fbqDataLayerObjectName];e.isFunction(i)&&i("trackCustom",r.event,r)}catch(e){console.warn(e)}}}})),sndefine("package-tracker",["tracker"],(function(){}));